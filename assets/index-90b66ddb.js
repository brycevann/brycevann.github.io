import{V as o,n as r}from"./index-26fc2b30.js";const l=o.extend({name:"ListBase",components:{},data(){return{expData:[],tableLayout:"fixed",leftFixedColumn:1,rightFixedColumn:1,size:"medium",bordered:!0,showHeader:!0,expColumns:[{colKey:"NO.",title:"NO.",fixed:"left"},{colKey:"exp-name",title:"实验名称"},{colKey:"exp-leader",title:"实验负责人"},{colKey:"exp-dev",title:"实验设备"},{colKey:"exp-date",title:"实验日期"},{colKey:"exp-state",title:"实验状态"},{fixed:"right",colKey:"op",title:"操作"}],pagination:{defaultPageSize:10,defaultCurrent:1,showPageSize:!1},searchValue:"",confirmVisible:!1,deleteIdx:-1}},computed:{confirmBody(){var t;if(this.deleteIdx>-1){const{name:e}=(t=this.data)==null?void 0:t[this.deleteIdx];return`删除后，${e}的所有实验信息将被清空，且无法恢复`}return""},offsetTop(){return this.$store.state.setting.isUseTabsRouter?48:0}},created(){this.$request.get("/src/data/expData.json").then(t=>{this.expData=t.data.record,this.pagination.total=t.data.total})},methods:{getContainer(){return document.querySelector(".tdesign-starter-layout")},rehandlePageChange(t,e){console.log("分页变化",t,e)},rehandleSelectChange(t){this.selectedRowKeys=t},rehandleChange(t,e){console.log("统一Change",t,e)},handleClickDelete(t){this.deleteIdx=t.rowIndex,this.confirmVisible=!0},onConfirmDelete(){this.data.splice(this.deleteIdx,1),this.pagination.total=this.data.length;const t=this.selectedRowKeys.indexOf(this.deleteIdx);t>-1&&this.selectedRowKeys.splice(t,1),this.confirmVisible=!1,this.$message.success("删除成功"),this.resetIdx()},onCancel(){this.resetIdx()},resetIdx(){this.deleteIdx=-1}}});var c=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",[n("t-card",{staticClass:"list-card-container",attrs:{bordered:!1}},[n("div",{staticClass:"content-header"},[n("h1",{staticClass:"content-header-title"},[e._v("实验列表")]),n("t-button",{attrs:{href:"/experiments/expform"},on:{click:function(){return t.$router.push("/experiments/expform")}}},[e._v("新建实验")])],1),n("t-row",{attrs:{justify:"space-between"},scopedSlots:e._u([{key:"suffix-icon",fn:function(){return[n("search-icon",{attrs:{size:"20px"}})]},proxy:!0}])},[n("div",{staticClass:"left-operation-container"})]),n("div",{staticClass:"table-container"},[n("t-table",{staticClass:"dev-table",attrs:{horizontalScrollAffixedBottom:"",hover:"",paginationAffixedBottom:"",tableLayout:"auto","row-key":"index",data:e.expData,pagination:e.pagination,columns:e.expColumns,cellEmptyContent:"-"},on:{"row-click":function(){return t.$router.push("/experiments/explist/expdetail")}},scopedSlots:e._u([{key:"op",fn:function(i){return[n("a",{staticClass:"t-button-link",on:{click:function(h){return e.handleClickDelete(i)}}},[e._v("删除")])]}}])})],1)],1),n("t-dialog",{attrs:{header:"确认删除当前所选实验？",body:e.confirmBody,visible:e.confirmVisible,onCancel:e.onCancel},on:{"update:visible":function(i){e.confirmVisible=i},confirm:e.onConfirmDelete}})],1)},d=[];const s={};var u=r(l,c,d,!1,f,"606639fe",null,null);function f(t){for(let e in s)this[e]=s[e]}const p=function(){return u.exports}();export{p as default};
